<form method="POST" action="https://script.google.com/macros/s/AKfycbz464FDDrRjvGSTSPLALd8NWmkitdin3bWN7d5KuJk1YiVw8KMbTgKLjLKQi827bqps/exec" name="Registration Form (Homotix)" id="registration">
    <input type="text" name="Full Name" placeholder="Full Name" oninput="capitalizeFirstLetter(this)" required>
    <input type="text" name="Mobile Number (+880)" placeholder="Mobile Number (+880)" pattern="[0-9]{11}" maxlength="11" oninput="validateMobileNumber(this)" required>
    <input type="text" name="Education Qualification (BHMS/DHMS)" placeholder="Education Qualification (BHMS/DHMS)" oninput="validateEducation(this)" required>
    <button type="submit" id="send">Send </button>
<script>
    function capitalizeFirstLetter(input) {
        input.value = input.value.charAt(0).toUpperCase() + input.value.slice(1);
    }

    function validateEducation(input) {
        const validValues = ['BHMS', 'DHMS'];
        const inputValue = input.value.toUpperCase();

        if (!validValues.includes(inputValue)) {
            input.setCustomValidity("Please enter 'BHMS' or 'DHMS'");
        } else {
            input.setCustomValidity("");
        }
    }

    function validateMobileNumber(input) {
        const inputValue = input.value;

        if (inputValue.length !== 11 || !inputValue.startsWith('01')) {
            input.setCustomValidity("Mobile Number must start with '01' and be 11 digits");
        } else {
            input.setCustomValidity("");
        }
    }

    document.getElementById("registration").addEventListener("submit", function (event) {
        event.preventDefault();

        const form = event.target;

        const educationInput = form.querySelector("[name='Education Qualification (BHMS/DHMS)']");
        const mobileNumberInput = form.querySelector("[name='Mobile Number (+880)']");

        validateEducation(educationInput);
        validateMobileNumber(mobileNumberInput);

        if (form.checkValidity()) {
            const formData = new FormData(form);

            fetch(form.action, {
                method: form.method,
                body: formData,
            })
                .then(response => response.json())
                .then(data => {
                    if (data.result === "success") {
                        window.location.href = "https://www.google.com";
                    } else {
                        alert("Submission failed. Please check your data and try again.");
                        form.reset(); 
                    }
                })
                .catch(error => {
                    console.error("Error during form submission:", error);
                    alert("An error occurred. Please try again later.");
                });
        }
    });
</script>
</form>